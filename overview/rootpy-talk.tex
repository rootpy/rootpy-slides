\documentclass[10pt,professionalfonts,serif,usenames,dvipsnames,svgnames,table]{beamer}

\include{preamble}
\include{phys_defs}

\title{rootpy: Pythonic ROOT}
%\subtitle{I have no subtitle}
\author[Noel Dawe]{Noel Dawe}
\date[\today]{\today}
\institute[rootpy]{for the rootpy dev team}
\titlegraphic{\includegraphics[height=3cm]{../common/images/rootpy_logo.png}}

\begin{document}

\frame{\titlepage
    \begin{center}
    {\bf ROOT Users Workshop, Saas-Fee}
    \end{center}
}

\frame{
    \frametitle{``What's the problem?''}

    \begin{center}
    {\bf Why would we even consider developing a layer on top of PyROOT?}
    \end{center}

    \begin{itemize}
        \itemsep=.3cm
        \item PyROOT is mainly bindings (although with some pythonization).
        \item Python's dynamic nature provides {\bf many possibilities not
            currently realized by PyROOT}. One might argue a majority of these
            high-level pythonizations are {\bf beyond the scope of what PyROOT should
            offer.}
        \item Certain tasks require awkward code and are error-prone.
            Similar workarounds are implemented by many in multiple places.\\
            {\bf Why not solve these issues once and for all?}
        \item There is a lack of integration of ROOT with the vast and growing
            ecosystem of scientific Python packages.\\ {\bf Why not enable users to
            benefit from both the power of ROOT and what is offered by the
            scientific Python community?}
        \end{itemize}
}

\frame{
    \frametitle{Scientific Python Applications}
    \begin{center}
    ``Can I perform complicated analysis with Python?''\\
    {\bf You certainly can!}
    \end{center}
    \begin{itemize}
        \item \href{http://root.cern.ch/drupal/}{ROOT} with
            \href{http://root.cern.ch/drupal/content/pyroot}{PyROOT}
        \item Interactive computing: \href{http://ipython.org/}{IPython}
        \item Powerful and fast array manipulation:
            \href{http://numpy.scipy.org/}{NumPy}
        \item Efficiently and easily handle large amounts of data:
            \href{http://www.pytables.org/moin}{PyTables}
        \item General scientific library: \href{http://www.scipy.org/}{scipy}
        \item Data analysis and modeling: \href{http://pandas.pydata.org/}{pandas}
        \item Statistical models and tests: \href{http://statsmodels.sourceforge.net/}{statsmodels}
        \item Fitting: \href{http://cxc.harvard.edu/sherpa4.4/index.html}{sherpa}
        \item Astronomy: \href{http://www.astropy.org/}{astropy}
        \item Image processing: \href{http://scikit-image.org/}{scikit-image}
        \item Machine learning:
            \href{http://scikit-learn.org/stable/}{scikit-learn}
        \item Feature-rich publication-quality plotting:
            \href{http://matplotlib.org/}{matplotlib}
        \item See a list of other kits here:
            \href{http://scikits.appspot.com/scikits}{scikits.appspot.com/scikits}
    \end{itemize}
}

\frame{
    \frametitle{Introducing rootpy\ldots}

    \begin{itemize}
        \item rootpy aims to provide a \textbf{\emph{ more pythonic layer}} on
            top of the PyROOT bindings and to take advantage of advanced
            features of the Python language.
        \item {\bf rootpy does not intend to recreate ROOT} or to {\em severely}
            alter the default behaviour of ROOT.
        \item {\bf rootpy is not an analysis framework}, but rather a library that
            one's analysis framework might use.
        \item rootpy provides an {\bf interface with the scientific Python
            packages}:
        \end{itemize}
        \begin{center}
            \includegraphics[width=.5\textwidth]{figs/rootpy-map.png}
        \end{center}
}

\frame{
    \frametitle{rootpy: key concepts and design philosophy}

    \begin{itemize}
        \item Pythonized classes in rootpy are subclasses of the corresponding
            ROOT classes with the same (or similar) name, but without the ``T''.\\
            (for example: TFile $\rightarrow$ File, TCanvas $\rightarrow$ Canvas, \\
            TH[1|2|3][C|S|I|F|D] $\rightarrow$ Hist, Hist2D, Hist3D).
        \item ROOT methods may be overridden or new methods created to add
            functionality (i.e. operators) and objects may be decorated with
            additional properties.
        \item Object names and titles are optional. Unspecified names default to
            UUIDs.
        \item ROOT messages should be routed through Python's logging system
            with error messages raised as Python exceptions.
        \item Python has a garbage collector but C++ does not: this can lead to
            strange issues. rootpy addresses these problems.
        \item Anywhere Python is typically slow we intend to instead use
            compiled C extension modules. Through the root\_numpy
            package, rootpy provides very fast conversion of ROOT Trees into
            NumPy arrays as well as efficiently filling ROOT histograms with
            NumPy arrays.
        \end{itemize}
}

\frame{
    \frametitle{``What does rootpy offer?''}

    \begin{center}
    \rowcolors[]{1}{blue!20}{blue!10}
    \begin{tabular}{l p{8cm}}
        {\bf rootpy.plotting} & histogram, graphs, canvas, pad, legend, and
            style subclasses with additional pythonizations,
            functions for plotting ROOT histograms with matplotlib. \\
        {\bf rootpy.tree} & trees, chains, tree objects, tree models, cuts. \\
        {\bf rootpy.io} & file and directory subclasses, utilities. \\
        {\bf rootpy.logger} & routing ROOT messages through Python's
            logging module. Turn ROOT error messages into Python exceptions. \\
        {\bf rootpy.memory} & utilities for monitoring TObject deletions
            and for keeping objects alive when explicit references on the Python
            side go out of scope. \\
        {\bf rootpy.interactive} & a wait function for preventing Python
            from exiting until all canvases have been closed. \\
        {\bf rootpy.root2hdf5} & conversion of ROOT files to HDF5. \\
        {\bf rootpy.context} & utilities for managing ROOT's global state. \\
        \multicolumn{2}{c}{\ldots and more \ldots} \\
        \multicolumn{2}{c}{See the
            \href{https://github.com/rootpy/root\_numpy}{root\_numpy}
        package for conversion of TTrees into NumPy arrays.}\\
        \end{tabular}
    \end{center}
}

\begin{frame}[fragile]
    \frametitle{Histograms}
    {\bf PyROOT}
    \vspace{-.2cm}
    \include{examples/hist}
    {\bf rootpy}
    \vspace{-.2cm}
    \include{examples/hist_rootpy}
\end{frame}

\begin{frame}[fragile]
    \frametitle{Cuts}
    \begin{columns}
        \column[t]{.45\textwidth}
        {\bf PyROOT}
        \include{examples/cuts}
        output:
        \include{examples/cuts_output}
        \column[t]{.45\textwidth}
        {\bf rootpy}
        \include{examples/cuts_rootpy}
        output:
        \include{examples/cuts_rootpy_output}
    \end{columns}
\end{frame}

\begin{frame}[fragile]
    \frametitle{PyROOT: Opening a TFile}

    \include{examples/file_open}
    \vspace{-.5cm}
    \include{examples/file_open_output}
\end{frame}

\begin{frame}[fragile]
    \frametitle{rootpy: Opening a TFile}

    \include{examples/file_open_rootpy}
    \vspace{-.5cm}
    \include{examples/file_open_rootpy_output}
\end{frame}

\begin{frame}[fragile]
    \frametitle{rootpy: Navigating a TFile}
    \include{examples/file}
    \vspace{-.5cm}
    \include{examples/file_output}
\end{frame}

\begin{frame}[fragile]
    \frametitle{rootpy: Filling a TTree}
    \include{examples/tree}
\end{frame}

\begin{frame}
    \frametitle{rootpy: matplotlib interface}
    ROOT histograms
    \href{https://github.com/rootpy/rootpy/blob/master/examples/plotting/plot_matplotlib_hist.py}{
    can be drawn with matplotlib} via rootpy's
    \href{https://github.com/rootpy/rootpy/blob/master/rootpy/plotting/root2matplotlib.py}{
    matplotlib interface}:
    \includegraphics[width=\textwidth]{figs/examples/matplotlib_example.png}
\end{frame}


\frame{
    \frametitle{The future of rootpy}

    \begin{itemize}
        \item Benefit from ROOT 6!
        \item Larger documentation coverage and more examples. {\bf This is important!}
        \item Python 3 support.
        \item Better integration with the IPython prompt: full tab completion
            and helpful builtin commands like pylab.
        \item Automatic wrapping of ROOT methods by parsing method signatures:
            \begin{itemize}
                \item If a method expects a TColor, rootpy can accept any matplotlib/ROOT color
                      and convert it into a TColor before passing to the ROOT method.
                \item Reduce the amount of code in rootpy.
                \end{itemize}
       \item TMVA:
           \begin{itemize}
                \item Ability to feed TMVA classifiers NumPy arrays.
                \end{itemize}
       \item RooFit and RooStats:
           \begin{itemize}
                \item Wrap RooArgSet as set() and RooArgList as list()?
                \item Create RooDataSets from NumPy arrays.
                \end{itemize}
       \item rootpy should serve as a {\bf testing ground for new ideas}.
   \end{itemize}
}

\begin{frame}[fragile]
    \frametitle{``How do I install rootpy?''}
    \begin{enumerate}
        \item First install ROOT with python support enabled (PyROOT)
        \item Clone the rootpy repository with git:
\begin{pyglist}[language=bash,texcl=true,style=vim]
git clone git://github.com/rootpy/rootpy.git
\end{pyglist}
        \item or checkout with svn:
\begin{pyglist}[language=bash,texcl=true,style=vim]
svn checkout http://svn.github.com/rootpy/rootpy
\end{pyglist}
        \item Then install:
\begin{pyglist}[language=bash,texcl=true,style=vim]
cd rootpy
python setup.py install --user
\end{pyglist}
\end{enumerate}
\begin{itemize}
    \item or install a \href{https://pypi.python.org/pypi/rootpy}{released version}
        with \href{https://pypi.python.org/pypi/pip}{pip}:
\begin{pyglist}[language=bash,texcl=true,style=vim]
pip install --user rootpy
\end{pyglist}
        \item See the
                \href{https://github.com/rootpy/rootpy/blob/master/README.rst}{README}
                for full instructions.
    \end{itemize}
\end{frame}

\begin{frame}[fragile]
    \frametitle{How can you contribute?}

    \begin{center}
    \includegraphics[width=5cm]{figs/we-want-you.jpg}
    \end{center}

    \begin{itemize}
        \item Development is community-driven.
        \item We use Git! See the rootpy collaboration on GitHub:
            \href{https://github.com/rootpy}{github.com/rootpy}
        \item Just fork rootpy into your own GitHub account and:
            \begin{pyglist}[language=bash,texcl=true,style=vim]
git clone git@github.com:<username>/rootpy.git
            \end{pyglist}
              Then submit a pull request with your contribution.
        \item Contributions are reviewed by peers before merging into the main branch.
        \item All new code automatically triggers our test suite using
            \href{https://travis-ci.org/}{Travis CI}.
    \end{itemize}
\end{frame}

\end{document}
